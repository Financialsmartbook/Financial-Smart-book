<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>4.4. Проценты и платежи по кредиту</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Основная цветовая палитра - современные цвета */
            --primary: #4f46e5;
            --primary-hover: #4338ca;
            --secondary: #6366f1;
            --accent: #818cf8;
            --background: #f9fafb;
            --background-card: #ffffff;
            --text-dark: #111827;
            --text-medium: #4b5563;
            --text-light: #f3f4f6;
            --text-muted: #9ca3af;
            --gradient: linear-gradient(135deg, #4f46e5 0%, #8b5cf6 100%);
            
            /* Семантические цвета */
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            
            /* Эффекты */
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-inner: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06);
            
            /* Размеры */
            --container-max-width: 1440px;
            --header-height: 70px;
            --sidebar-width: 300px;
            --border-radius-sm: 0.375rem;
            --border-radius: 0.75rem;
            --border-radius-lg: 1.5rem;
            
            /* Анимация */
            --transition-fast: 150ms ease;
            --transition: 300ms ease;
            --transition-slow: 500ms ease;
            --easing-standard: cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Переменная для мобильной высоты окна */
            --vh: 1vh;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
            scroll-padding-top: var(--header-height);
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.7;
            background: var(--background);
            color: var(--text-dark);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        a {
            color: var(--primary);
            text-decoration: none;
            transition: color var(--transition-fast);
        }

        a:hover {
            color: var(--primary-hover);
        }

        h1, h2, h3, h4, h5, h6 {
            line-height: 1.2;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        p {
            margin-bottom: 1rem;
        }

        button, .button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-size: 1rem;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            box-shadow: var(--shadow-sm);
        }

        button:hover, .button:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        button:active, .button:active {
            transform: translateY(0);
        }

        /* Layout */
        .container {
            width: 100%;
            max-width: var(--container-max-width);
            margin: 0 auto;
            padding: 2rem;
        }

        /* Header */
        .header {
            position: sticky;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            background: var(--background-card);
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1.5rem;
            z-index: 50;
        }

        .header-logo {
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-nav {
            display: flex;
            gap: 1.5rem;
        }

        .nav-link {
            color: var(--text-medium);
            font-weight: 500;
            transition: color var(--transition-fast);
            position: relative;
        }

        .nav-link:hover {
            color: var(--text-dark);
        }

        .nav-link.active {
            color: var(--primary);
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -0.35rem;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--primary);
            border-radius: 1px;
        }

        .mobile-menu-btn {
            display: none;
            background: transparent;
            border: none;
            color: var(--text-medium);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            box-shadow: none;
        }

        .mobile-menu-btn:hover {
            color: var(--text-dark);
            background: transparent;
            box-shadow: none;
        }

        /* Hero section */
        .hero-section {
            background: var(--gradient);
            padding: 4rem 2rem;
            border-radius: var(--border-radius-lg);
            margin: 2rem 0 4rem;
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .hero-content {
            max-width: 600px;
            position: relative;
            z-index: 2;
        }

        .hero-title {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            line-height: 1.2;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .hero-description {
            font-size: 1.2rem;
            opacity: 0.95;
        }

        .hero-image {
            width: 400px;
            filter: drop-shadow(0 12px 20px rgba(0, 0, 0, 0.3));
            animation: float 6s ease-in-out infinite;
            position: relative;
            z-index: 2;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            opacity: 0.3;
            z-index: 1;
        }

        .hero-icons {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 1;
            overflow: hidden;
        }

        .hero-icon {
            position: absolute;
            font-size: 2rem;
            color: rgba(255, 255, 255, 0.2);
            animation: floatIcon 15s linear infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes floatIcon {
            0% { transform: translateY(100vh) rotate(0deg); }
            100% { transform: translateY(-100px) rotate(360deg); }
        }

        /* Section cards */
        .section-card {
            background: var(--background-card);
            padding: 2.5rem;
            border-radius: var(--border-radius);
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            transition: transform var(--transition), box-shadow var(--transition);
        }

        .section-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .section-title {
            color: var(--text-dark);
            margin-bottom: 1.5rem;
            position: relative;
            display: inline-block;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -0.5rem;
            left: 0;
            width: 60px;
            height: 3px;
            background: var(--primary);
            border-radius: 3px;
        }

        .justify-text {
            text-align: justify;
        }

        /* Accordion */
        .accordion {
            background: var(--background-card);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .accordion-item {
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .accordion-item:last-child {
            border-bottom: none;
        }

        .accordion-header {
            padding: 1.25rem 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 500;
            background: rgba(99, 102, 241, 0.05);
            transition: background var(--transition-fast);
        }

        .accordion-header:hover {
            background: rgba(99, 102, 241, 0.1);
        }

        .accordion-header.active {
            background: rgba(99, 102, 241, 0.15);
        }

        .accordion-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: all var(--transition);
        }

        .accordion-content-inner {
            padding: 1.5rem;
        }

        .accordion-content.active {
            max-height: 1000px;
        }

        /* Calculator */
        .calculator {
            background: var(--background-card);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-medium);
        }

        .calculator input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            margin: 1rem 0;
        }

        .calculator input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-fast);
        }

        .calculator input[type="range"]::-webkit-slider-thumb:hover {
            background: var(--primary-hover);
            transform: scale(1.1);
        }

        .calculator input, .calculator select {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid #e5e7eb;
            border-radius: var(--border-radius-sm);
            font-family: inherit;
            font-size: 1rem;
            transition: border-color var(--transition-fast);
            background: white;
        }

        .calculator input:focus, .calculator select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .slider-values {
            display: flex;
            justify-content: space-between;
            margin-top: 0.25rem;
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .range-value {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }

        .result {
            margin-top: 1.5rem;
            padding: 1.25rem;
            border-radius: var(--border-radius-sm);
            font-weight: 500;
            background: #f3f4f6;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .result-item:last-child {
            margin-bottom: 0;
            padding-top: 0.75rem;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
        }

        .result-label {
            color: var(--text-medium);
        }

        .result-value {
            font-weight: 600;
            color: var(--text-dark);
        }

        /* Interactive grid */
        .interactive-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        /* Formula box */
        .formula-box {
            background: rgba(99, 102, 241, 0.05);
            border: 1px solid rgba(99, 102, 241, 0.1);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin: 1.5rem 0;
            text-align: center;
        }
        
        .formula {
            font-family: 'Times New Roman', serif;
            font-size: 1.25rem;
            padding: 0.5rem 0;
        }
        
        .formula-caption {
            font-size: 0.875rem;
            color: var(--text-medium);
            margin-top: 0.5rem;
        }

        /* Example box */
        .example-box {
            background: rgba(59, 130, 246, 0.05);
            border: 1px solid rgba(59, 130, 246, 0.1);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin: 1.5rem 0;
            position: relative;
        }
        
        .example-box::before {
            content: 'Пример';
            position: absolute;
            top: -0.75rem;
            left: 1rem;
            background: var(--background-card);
            padding: 0 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--info);
        }

        /* Tips list */
        .tips-list {
            list-style: none;
            padding: 0;
            margin: 1.5rem 0;
        }

        .tips-item {
            padding: 1.25rem;
            margin-bottom: 1rem;
            background: var(--background-card);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-sm);
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            transition: transform var(--transition-fast), box-shadow var(--transition-fast);
        }

        .tips-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow);
        }

        .tips-item i {
            color: var(--primary);
            font-size: 1.2rem;
            margin-top: 0.25rem;
        }

        .tips-item strong {
            display: block;
            margin-bottom: 0.35rem;
            color: var(--text-dark);
        }

        /* Comparison table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            box-shadow: var(--shadow);
            border-radius: var(--border-radius);
            overflow: hidden;
        }

        .comparison-table th, .comparison-table td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .comparison-table th {
            background-color: rgba(99, 102, 241, 0.05);
            font-weight: 600;
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        .comparison-table tr:nth-child(even) {
            background-color: rgba(99, 102, 241, 0.02);
        }

        /* Tab navigation for calculator */
        .tab-nav {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .tab-button {
            padding: 0.75rem 1.25rem;
            background: rgba(99, 102, 241, 0.1);
            border: none;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            font-weight: 500;
            color: var(--text-medium);
            transition: all var(--transition-fast);
        }

        .tab-button:hover {
            background: rgba(99, 102, 241, 0.2);
            color: var(--text-dark);
        }

        .tab-button.active {
            background: var(--primary);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Payment chart */
        .payment-chart {
            width: 100%;
            height: 300px;
            margin: 1.5rem 0;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: var(--border-radius);
            padding: 1rem;
        }

        /* Progress bar */
        #progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 4px;
            background: var(--gradient);
            z-index: 100;
            width: 0;
            transition: width var(--transition-fast);
        }

        /* Back to top */
        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition);
            z-index: 99;
            box-shadow: var(--shadow);
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            background: var(--primary-hover);
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        /* Media Queries */
        @media (max-width: 1200px) {
            .container {
                max-width: 1140px;
                padding: 1.75rem;
            }
        }

        @media (max-width: 992px) {
            html {
                font-size: 15px;
            }
            
            .container {
                max-width: 960px;
                padding: 1.5rem;
            }
            
            .hero-section {
                flex-direction: column;
                text-align: center;
                padding: 3rem 1.5rem;
                gap: 2rem;
            }
            
            .hero-content {
                max-width: 100%;
            }
            
            .hero-image {
                width: 320px;
            }
            
            .hero-title {
                font-size: 2.2rem;
            }
            
            .section-title::after {
                left: 50%;
                transform: translateX(-50%);
            }
            
            .interactive-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            html {
                font-size: 14px;
            }
            
            .container {
                padding: 1.25rem;
            }
            
            .hero-section {
                padding: 2.5rem 1.25rem;
                margin: 1.5rem 0 3rem;
            }
            
            .hero-image {
                width: 250px;
            }
            
            .hero-title {
                font-size: 2rem;
                margin-bottom: 1rem;
            }
            
            .hero-description {
                font-size: 1.1rem;
            }
            
            .section-card {
                padding: 1.5rem;
            }
            
            .accordion-header {
                padding: 1rem 1.25rem;
            }
            
            .accordion-content-inner {
                padding: 1.25rem;
            }
            
            .comparison-table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
        }

        @media (max-width: 576px) {
            html {
                font-size: 13px;
            }
            
            .container {
                padding: 1rem;
            }
            
            .hero-section {
                padding: 2rem 1rem;
                margin: 1rem 0 2.5rem;
                border-radius: var(--border-radius);
            }
            
            .hero-image {
                width: 200px;
            }
            
            .hero-title {
                font-size: 1.8rem;
            }
            
            .section-card {
                padding: 1.25rem;
                border-radius: var(--border-radius-sm);
            }
            
            .example-box, .formula-box {
                padding: 1.25rem;
            }
            
            .tab-nav {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .tab-button {
                width: 100%;
            }
            
            .tips-item {
                padding: 1rem;
            }
        }

        /* Print styles */
        @media print {
            body {
                font-size: 12pt;
                background: white;
                color: black;
            }
            
            .header, .back-to-top, button, #progress-bar {
                display: none;
            }
            
            .container {
                width: 100%;
                max-width: 100%;
                padding: 0;
                margin: 0;
            }
            
            .section-card, .accordion, .calculator, .tips-item {
                page-break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ddd;
                margin-bottom: 1cm;
            }
            
            .comparison-table {
                border: 1px solid #000;
                white-space: normal;
            }
            
            .comparison-table th, .comparison-table td {
                border: 1px solid #000;
            }
            
            a {
                text-decoration: none;
                color: black;
            }
            
            .section-card:hover, 
            .tips-item:hover {
                transform: none;
                box-shadow: none;
            }
        }
    </style>
</head>
<body>
    <div id="progress-bar"></div>
    <a href="#top" class="back-to-top" id="backToTop"><i class="fas fa-arrow-up"></i></a>
    
    <header id="top" class="header">
        <a href="#" class="header-logo">
            <i class="fas fa-calculator"></i>
            Финансовая грамотность
        </a>
        <nav class="header-nav" id="headerNav">
            <a href="#basics" class="nav-link">Основы</a>
            <a href="#payment-types" class="nav-link">Виды платежей</a>
            <a href="#formulas" class="nav-link">Формулы</a>
            <a href="#calculator" class="nav-link">Калькулятор</a>
            <a href="#tips" class="nav-link">Советы</a>
        </nav>
        <button class="mobile-menu-btn" id="mobileMenuBtn">
            <i class="fas fa-bars"></i>
        </button>
    </header>

    <div class="container">
        <!-- Hero Section -->
        <div class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title">4.4. Проценты и платежи по кредиту</h1>
                <p class="hero-description">
                    Узнайте, как начисляются проценты и рассчитайте платежи по кредиту.
                </p>
            </div>
            <img src="credit.png" alt="Проценты по кредиту" class="hero-image">
            <div class="hero-icons">
                <i class="fas fa-percentage hero-icon" style="left: 15%; animation-duration: 20s;"></i>
                <i class="fas fa-chart-line hero-icon" style="left: 35%; animation-duration: 15s; animation-delay: 2s;"></i>
                <i class="fas fa-money-bill-wave hero-icon" style="left: 55%; animation-duration: 18s; animation-delay: 4s;"></i>
                <i class="fas fa-calculator hero-icon" style="left: 75%; animation-duration: 22s; animation-delay: 6s;"></i>
                <i class="fas fa-coins hero-icon" style="left: 25%; animation-duration: 17s; animation-delay: 8s;"></i>
                <i class="fas fa-piggy-bank hero-icon" style="left: 65%; animation-duration: 19s; animation-delay: 10s;"></i>
            </div>
        </div>

        <main>
            <!-- Как начисляются проценты? -->
            <section class="section-card" id="basics">
                <h2 class="section-title">Как начисляются проценты?</h2>
                <p class="justify-text">
                    Одной из важнейших обязательных характеристик кредита является процент, который вы платите за пользование заемными средствами. 
                    Процентная ставка по кредиту относится к существенным условиям кредитного договора. Ее размер и порядок определения, 
                    в том числе в зависимости от изменения предусмотренных в кредитном договоре условий, как правило, устанавливается кредитором 
                    по соглашению с заемщиком.
                </p>
                <p class="justify-text">
                    Процент по кредиту устанавливается как правило в форме простой годовой процентной ставки, которая фиксируется в кредитном договоре. 
                    Это означает, что процент на сумму взятого кредита будет начисляться за точное количество дней пользования средствами в течение года. 
                    Для расчета процентов по кредиту по простой процентной ставке берется фактическое число дней, составляющих срок, на который взяты 
                    кредитные средства. День выдачи кредита и день его возврата при этом считаются за один день. Точное количество дней вы можете посчитать, 
                    взяв календарь или воспользовавшись специальной программой.
                </p>
                <p class="justify-text">
                    В российской банковской практике количество дней в году считается по факту – 365 или 366, в зависимости от того, является ли данный год 
                    обыкновенным или високосным. В зарубежных банках возможен иной порядок расчета: так, в некоторых странах принято высчитывать процент 
                    с использованием приблизительных сроков. В этом случае считается, что в году 360 дней, а в каждом месяце – 30. Для больших сроков кредита 
                    это удобно, поскольку в таком случае финансовые вычисления упрощаются.
                </p>

                <div class="formula-box">
                    <div class="formula">I = P × r × t</div>
                    <div class="formula-caption">
                        где: I — сумма процентов, P — основная сумма кредита, r — процентная ставка (в десятичной форме), t — срок кредита в годах
                    </div>
                </div>

                <div class="example-box">
                    <p>Если вы берете кредит в размере 100 000 рублей под 12% годовых на 3 года, то общая сумма процентов за весь срок составит:</p>
                    <p>I = 100 000 × 0,12 × 3 = 36 000 рублей</p>
                    <p>Эта формула применима для расчета простых процентов, когда проценты начисляются только на первоначальную сумму кредита.</p>
                </div>
            </section>

            <!-- Аннуитетный и дифференцированный платеж -->
            <section class="section-card" id="payment-types">
                <h2 class="section-title">Аннуитетный и дифференцированный платеж</h2>
                <p class="justify-text">
                    В банковской практике существуют два основных способа погашения кредита: аннуитетный (равными платежами) и дифференцированный (уменьшающимися платежами). 
                    Каждый из них имеет свои особенности, преимущества и недостатки.
                </p>
                
                <div class="accordion">
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <span>Аннуитетный платеж</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-content-inner">
                                <p class="justify-text">
                                    При аннуитетном платеже задолженность по кредиту ежемесячно погашается равными фиксированными платежами на протяжении всего срока кредита. 
                                    В первую очередь уплачиваются проценты: каждый месяц они считаются от оставшегося долга по кредиту. Оставшаяся после уплаты процентов 
                                    часть фиксированного платежа направляется на погашение основного долга. Соответственно, в следующем месяце остаток долга становится меньше, 
                                    на него начисляется меньше процентов, а на погашение основного платежа идет чуть большая часть фиксированного платежа.
                                </p>
                                <p class="justify-text">
                                    При этом чем дольше срок кредитования, тем меньше будет обязательный платеж, но тем больше в итоге переплата. При длительном сроке 
                                    кредитования первое время большая часть из поступающего платежа будет идти именно на погашение процентов, а основной долг будет 
                                    уменьшаться медленно.
                                </p>

                                <h4>Преимущества аннуитетного платежа:</h4>
                                <ul>
                                    <li>Удобство планирования бюджета благодаря одинаковым ежемесячным платежам</li>
                                    <li>Меньшая финансовая нагрузка в начале срока кредита</li>
                                    <li>Возможность взять кредит на большую сумму (по сравнению с дифференцированным) из-за равномерного распределения платежей</li>
                                </ul>

                                <h4>Недостатки аннуитетного платежа:</h4>
                                <ul>
                                    <li>Большая общая переплата по кредиту</li>
                                    <li>Медленное погашение основного долга в начале срока</li>
                                    <li>При досрочном погашении в первой половине срока кредита — существенная переплата по процентам</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <span>Дифференцированный платеж</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-content-inner">
                                <p class="justify-text">
                                    При дифференцированном платеже сумма основного долга делится на равные части по количеству месяцев кредитования. Таким образом, 
                                    ежемесячно в счет погашения основного долга вносится одинаковая фиксированная сумма. Проценты же начисляются на остаток задолженности. 
                                    Поскольку остаток долга ежемесячно уменьшается, то и проценты каждый месяц начисляются в меньшем размере. Таким образом, 
                                    ежемесячный платеж постепенно уменьшается к концу срока кредитования.
                                </p>
                                <p class="justify-text">
                                    В начале срока кредитования размер платежа будет максимальным, что создает большую нагрузку на бюджет заемщика. Однако с каждым месяцем 
                                    платеж становится меньше, и к концу срока кредитования размер платежа значительно снижается.
                                </p>

                                <h4>Преимущества дифференцированного платежа:</h4>
                                <ul>
                                    <li>Меньшая общая переплата по кредиту</li>
                                    <li>Быстрое погашение основного долга</li>
                                    <li>Снижение финансовой нагрузки со временем</li>
                                    <li>Экономия на процентах при досрочном погашении</li>
                                </ul>

                                <h4>Недостатки дифференцированного платежа:</h4>
                                <ul>
                                    <li>Высокая финансовая нагрузка в начале срока кредита</li>
                                    <li>Необходимость планирования больших выплат в первые месяцы</li>
                                    <li>Сложности при получении кредита из-за высоких требований к платежеспособности заемщика (банк оценивает возможность заемщика выплачивать максимальный, первый платеж)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Характеристика</th>
                            <th>Аннуитетный платеж</th>
                            <th>Дифференцированный платеж</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Размер ежемесячного платежа</td>
                            <td>Одинаковый на протяжении всего срока</td>
                            <td>Уменьшается к концу срока</td>
                        </tr>
                        <tr>
                            <td>Финансовая нагрузка в начале срока</td>
                            <td>Ниже</td>
                            <td>Выше</td>
                        </tr>
                        <tr>
                            <td>Общая переплата по кредиту</td>
                            <td>Больше</td>
                            <td>Меньше</td>
                        </tr>
                        <tr>
                            <td>Скорость погашения основного долга</td>
                            <td>Медленнее (особенно вначале)</td>
                            <td>Быстрее (равномерно весь срок)</td>
                        </tr>
                        <tr>
                            <td>Удобство планирования бюджета</td>
                            <td>Удобнее (платеж известен заранее)</td>
                            <td>Сложнее (платеж меняется каждый месяц)</td>
                        </tr>
                        <tr>
                            <td>Эффективность досрочного погашения</td>
                            <td>Ниже (особенно в начале срока)</td>
                            <td>Выше</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Формулы расчета платежей -->
            <section class="section-card" id="formulas">
                <h2 class="section-title">Формулы расчета платежей</h2>
                <p class="justify-text">
                    Для расчета платежей по кредиту используются различные формулы в зависимости от типа платежа. Ниже приведены формулы для расчета аннуитетных и дифференцированных платежей.
                </p>

                <h3>Аннуитетный платеж</h3>
                <div class="formula-box">
                    <div class="formula">A = K × P</div>
                    <div class="formula">K = i × (1 + i)^n / ((1 + i)^n - 1)</div>
                    <div class="formula-caption">
                        где: A — ежемесячный аннуитетный платеж, P — сумма кредита, i — месячная процентная ставка (годовая ставка / 12 / 100), 
                        n — количество месяцев, K — коэффициент аннуитета
                    </div>
                </div>

                <h3>Дифференцированный платеж</h3>
                <div class="formula-box">
                    <div class="formula">D = P/n + P × i × (1 - (m-1)/n)</div>
                    <div class="formula-caption">
                        где: D — ежемесячный дифференцированный платеж, P — сумма кредита, i — месячная процентная ставка, 
                        n — количество месяцев, m — номер месяца, за который рассчитывается платеж
                    </div>
                </div>

                <div class="example-box">
                    <p><strong>Пример расчета:</strong> Кредит 300 000 рублей на 3 года (36 месяцев) под 12% годовых.</p>
                    
                    <p><strong>Аннуитетный платеж:</strong></p>
                    <p>i = 12% / 12 / 100 = 0,01</p>
                    <p>K = 0,01 × (1 + 0,01)^36 / ((1 + 0,01)^36 - 1) = 0,03321</p>
                    <p>A = 0,03321 × 300 000 = 9 963 рубля</p>
                    <p>Общая сумма выплат: 9 963 × 36 = 358 668 рублей</p>
                    <p>Переплата: 358 668 - 300 000 = 58 668 рублей</p>
                    
                    <p><strong>Дифференцированный платеж:</strong></p>
                    <p>Ежемесячное погашение основного долга: 300 000 / 36 = 8 333 рубля</p>
                    <p>Первый месяц: 8 333 + 300 000 × 0,01 = 11 333 рубля</p>
                    <p>Последний месяц: 8 333 + 8 333 × 0,01 = 8 417 рублей</p>
                    <p>Общая сумма выплат: около 355 500 рублей</p>
                    <p>Переплата: около 55 500 рублей</p>
                </div>
            </section>

            <!-- Калькулятор платежей -->
            <section class="section-card" id="calculator">
                <h2 class="section-title">Калькулятор платежей по кредиту</h2>
                <p class="justify-text">
                    Используйте наш калькулятор, чтобы рассчитать платежи по кредиту и сравнить аннуитетную и дифференцированную схемы погашения.
                </p>

                <div class="tab-nav">
                    <button class="tab-button active" data-tab="calculator-tab">Калькулятор</button>
                    <button class="tab-button" data-tab="comparison-tab">Сравнение платежей</button>
                </div>

                <div class="tab-content active" id="calculator-tab">
                    <div class="calculator">
                        <div class="form-group">
                            <label for="loan-amount">Сумма кредита</label>
                            <div class="range-value" id="amount-value">300 000 ₽</div>
                            <input type="range" id="loan-amount" min="10000" max="10000000" step="10000" value="300000">
                            <div class="slider-values">
                                <span>10 тыс.</span>
                                <span>10 млн.</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="loan-term">Срок кредита (лет)</label>
                            <div class="range-value" id="term-value">3 года</div>
                            <input type="range" id="loan-term" min="1" max="30" step="1" value="3">
                            <div class="slider-values">
                                <span>1 год</span>
                                <span>30 лет</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="interest-rate">Процентная ставка (%)</label>
                            <input type="number" id="interest-rate" min="1" max="30" step="0.1" value="12">
                        </div>
                        
                        <div class="form-group">
                            <label>Тип платежа</label>
                            <div style="display: flex; gap: 1rem;">
                                <label style="display: inline-flex; align-items: center; gap: 0.5rem;">
                                    <input type="radio" name="payment-type" value="annuity" checked>
                                    Аннуитетный
                                </label>
                                <label style="display: inline-flex; align-items: center; gap: 0.5rem;">
                                    <input type="radio" name="payment-type" value="differentiated">
                                    Дифференцированный
                                </label>
                            </div>
                        </div>
                        
                        <button id="calculate-btn">Рассчитать</button>
                        
                        <div class="result" id="result">
                            <div class="result-item">
                                <span class="result-label">Ежемесячный платеж:</span>
                                <span class="result-value" id="monthly-payment">9 963 ₽</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Общая сумма выплат:</span>
                                <span class="result-value" id="total-payment">358 668 ₽</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">Переплата по кредиту:</span>
                                <span class="result-value" id="overpayment">58 668 ₽</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="comparison-tab">
                    <div class="interactive-grid">
                        <div>
                            <h3>Сравнение платежей</h3>
                            <p>График показывает, как меняются ежемесячные платежи при аннуитетной и дифференцированной схемах погашения кредита.</p>
                            <div class="payment-chart" id="payment-chart">
                                <!-- График будет отрисован с помощью JavaScript -->
                            </div>
                        </div>
                        <div>
                            <h3>Сравнение переплаты</h3>
                            <p>Таблица сравнения аннуитетных и дифференцированных платежей для кредита в 300 000 ₽ на 3 года под 12% годовых.</p>
                            <table class="comparison-table" id="comparison-table">
                                <thead>
                                    <tr>
                                        <th>Параметр</th>
                                        <th>Аннуитетный</th>
                                        <th>Дифференцированный</th>
                                        <th>Разница</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Первый платеж</td>
                                        <td>9 963 ₽</td>
                                        <td>11 333 ₽</td>
                                        <td>-1 370 ₽</td>
                                    </tr>
                                    <tr>
                                        <td>Последний платеж</td>
                                        <td>9 963 ₽</td>
                                        <td>8 417 ₽</td>
                                        <td>+1 546 ₽</td>
                                    </tr>
                                    <tr>
                                        <td>Общая сумма выплат</td>
                                        <td>358 668 ₽</td>
                                        <td>355 500 ₽</td>
                                        <td>+3 168 ₽</td>
                                    </tr>
                                    <tr>
                                        <td>Переплата</td>
                                        <td>58 668 ₽</td>
                                        <td>55 500 ₽</td>
                                        <td>+3 168 ₽</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Советы по выбору типа платежа -->
            <section class="section-card" id="tips">
                <h2 class="section-title">Советы по выбору типа платежа</h2>
                <p class="justify-text">
                    Выбор типа платежа зависит от вашей финансовой ситуации, целей и предпочтений. Вот несколько рекомендаций, которые помогут вам сделать правильный выбор.
                </p>

                <ul class="tips-list">
                    <li class="tips-item">
                        <i class="fas fa-money-bill-wave"></i>
                        <div>
                            <strong>Оцените свои текущие финансовые возможности</strong>
                            Если ваш бюджет ограничен, аннуитетный платеж может быть более подходящим, так как вначале он меньше дифференцированного. Если же вы можете себе позволить более высокие платежи в начале срока, дифференцированный платеж поможет сэкономить на общей переплате.
                        </div>
                    </li>
                    <li class="tips-item">
                        <i class="fas fa-chart-line"></i>
                        <div>
                            <strong>Учитывайте перспективы роста дохода</strong>
                            Если вы ожидаете рост своих доходов в будущем, дифференцированный платеж может быть выгоднее. Вы справитесь с высокими платежами вначале, а затем платежи будут снижаться, освобождая средства для других целей.
                        </div>
                    </li>
                    <li class="tips-item">
                        <i class="fas fa-clock"></i>
                        <div>
                            <strong>Учитывайте срок кредита</strong>
                            Чем дольше срок кредита, тем больше преимущество дифференцированного платежа с точки зрения экономии на процентах. При коротких сроках (1-3 года) разница в переплате не так существенна.
                        </div>
                    </li>
                    <li class="tips-item">
                        <i class="fas fa-piggy-bank"></i>
                        <div>
                            <strong>Планируете досрочное погашение?</strong>
                            Если вы планируете погасить кредит досрочно, дифференцированный платеж выгоднее. При аннуитетном платеже большая часть процентов уплачивается в начале срока кредита.
                        </div>
                    </li>
                    <li class="tips-item">
                        <i class="fas fa-search-dollar"></i>
                        <div>
                            <strong>Сравните предложения разных банков</strong>
                            Некоторые банки предлагают только аннуитетную схему погашения. Если дифференцированный платеж для вас предпочтительнее, поищите банки, которые предоставляют такую возможность.
                        </div>
                    </li>
                </ul>
            </section>
        </main>
    </div>

    <script>
        // Функция для обработки адаптивных элементов
        function enhanceResponsiveness() {
            // Устанавливаем --vh переменную для решения проблемы высоты на мобильных устройствах
            function setVhVariable() {
                const vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
            }
            
            // Вызываем все функции оптимизации
            setVhVariable();
            
            // События для поддержания адаптивности при изменении размеров
            window.addEventListener('resize', function() {
                setVhVariable();
            });
            
            // Обработка ориентации устройства
            window.addEventListener('orientationchange', function() {
                setTimeout(function() {
                    setVhVariable();
                }, 200);
            });
        }

        // Progress bar
        window.addEventListener('scroll', function() {
            const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrollPercent = (scrollTop / scrollHeight) * 100;
            document.getElementById('progress-bar').style.width = scrollPercent + '%';
            
            // Back to top button
            if (scrollTop > 500) {
                document.getElementById('backToTop').classList.add('visible');
            } else {
                document.getElementById('backToTop').classList.remove('visible');
            }
        });

        // Mobile menu toggle
        if (document.getElementById('mobileMenuBtn')) {
            document.getElementById('mobileMenuBtn').addEventListener('click', function() {
                document.getElementById('headerNav').classList.toggle('active');
                this.querySelector('i').classList.toggle('fa-bars');
                this.querySelector('i').classList.toggle('fa-times');
            });
        }

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                
                // Close mobile menu if open
                if (document.getElementById('headerNav').classList.contains('active')) {
                    document.getElementById('headerNav').classList.remove('active');
                    document.querySelector('.mobile-menu-btn i').className = 'fas fa-bars';
                }
                
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Accordion functionality
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', function() {
                const content = this.nextElementSibling;
                const isActive = content.classList.contains('active');
                
                // Close all accordion items
                document.querySelectorAll('.accordion-content').forEach(item => {
                    item.classList.remove('active');
                });
                
                document.querySelectorAll('.accordion-header').forEach(head => {
                    head.classList.remove('active');
                });
                
                // Reset all icons
                document.querySelectorAll('.accordion-header i').forEach(icon => {
                    icon.className = 'fas fa-chevron-down';
                });
                
                // Open the clicked one if it wasn't already open
                if (!isActive) {
                    content.classList.add('active');
                    this.classList.add('active');
                    this.querySelector('i').className = 'fas fa-chevron-up';
                }
            });
        });

        // Tab navigation
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', function() {
                // Deactivate all tabs
                document.querySelectorAll('.tab-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // Activate the selected tab
                this.classList.add('active');
                document.getElementById(this.getAttribute('data-tab')).classList.add('active');
            });
        });

        // Loan calculator
        const amountSlider = document.getElementById('loan-amount');
        const termSlider = document.getElementById('loan-term');
        const amountValue = document.getElementById('amount-value');
        const termValue = document.getElementById('term-value');
        const interestRateInput = document.getElementById('interest-rate');
        const calculateBtn = document.getElementById('calculate-btn');
        
        // Update slider values
        amountSlider.addEventListener('input', function() {
            amountValue.textContent = Number(this.value).toLocaleString('ru-RU') + ' ₽';
        });
        
        termSlider.addEventListener('input', function() {
            termValue.textContent = this.value + ' ' + getYearWord(this.value);
        });
        
        // Calculate loan
        calculateBtn.addEventListener('click', function() {
            const amount = Number(amountSlider.value);
            const term = Number(termSlider.value) * 12; // Convert to months
            const rate = Number(interestRateInput.value) / 100 / 12; // Monthly rate
            const isAnnuity = document.querySelector('input[name="payment-type"]:checked').value === 'annuity';
            
            let monthlyPayment, totalPayment, overpayment;
            
            if (isAnnuity) {
                // Аннуитетный платеж: P = S * (i * (1 + i)^n) / ((1 + i)^n - 1)
                monthlyPayment = amount * (rate * Math.pow(1 + rate, term)) / (Math.pow(1 + rate, term) - 1);
                totalPayment = monthlyPayment * term;
                overpayment = totalPayment - amount;
                
                document.getElementById('monthly-payment').textContent = Math.round(monthlyPayment).toLocaleString('ru-RU') + ' ₽';
            } else {
                // Дифференцированный платеж: первый платеж
                const principalPayment = amount / term;
                const firstInterestPayment = amount * rate;
                const firstMonthlyPayment = principalPayment + firstInterestPayment;
                
                // Последний платеж
                const lastInterestPayment = principalPayment * rate;
                const lastMonthlyPayment = principalPayment + lastInterestPayment;
                
                // Общая сумма
                // Для дифференцированного платежа используем формулу арифметической прогрессии для суммы процентов
                const interestSum = (amount * rate * term + principalPayment * rate * term) / 2;
                totalPayment = amount + interestSum;
                overpayment = totalPayment - amount;
                
                document.getElementById('monthly-payment').textContent = 
                    Math.round(firstMonthlyPayment).toLocaleString('ru-RU') + ' → ' + 
                    Math.round(lastMonthlyPayment).toLocaleString('ru-RU') + ' ₽';
            }
            
            document.getElementById('total-payment').textContent = Math.round(totalPayment).toLocaleString('ru-RU') + ' ₽';
            document.getElementById('overpayment').textContent = Math.round(overpayment).toLocaleString('ru-RU') + ' ₽';
            
            // Обновляем таблицу сравнения
            updateComparisonTable(amount, term, rate);
            
            // Рисуем график
            drawPaymentChart(amount, term, rate);
        });
        
        // Функция обновления таблицы сравнения
        function updateComparisonTable(amount, term, rate) {
            // Расчет для аннуитетного платежа
            const annuityPayment = amount * (rate * Math.pow(1 + rate, term)) / (Math.pow(1 + rate, term) - 1);
            const annuityTotal = annuityPayment * term;
            const annuityOverpayment = annuityTotal - amount;
            
            // Расчет для дифференцированного платежа
            const principalPayment = amount / term;
            const firstDiffPayment = principalPayment + (amount * rate);
            const lastDiffPayment = principalPayment + (principalPayment * rate);
            
            // Для дифференцированного платежа используем формулу арифметической прогрессии
            const interestSum = (amount * rate * term + principalPayment * rate * term) / 2;
            const diffTotal = amount + interestSum;
            const diffOverpayment = diffTotal - amount;
            
            // Обновляем таблицу
            const table = document.getElementById('comparison-table');
            if (table) {
                const rows = table.getElementsByTagName('tbody')[0].getElementsByTagName('tr');
                
                // Первый платеж
                rows[0].cells[1].textContent = Math.round(annuityPayment).toLocaleString('ru-RU') + ' ₽';
                rows[0].cells[2].textContent = Math.round(firstDiffPayment).toLocaleString('ru-RU') + ' ₽';
                rows[0].cells[3].textContent = (Math.round(annuityPayment - firstDiffPayment) > 0 ? '+' : '') + 
                                             Math.round(annuityPayment - firstDiffPayment).toLocaleString('ru-RU') + ' ₽';
                
                // Последний платеж
                rows[1].cells[1].textContent = Math.round(annuityPayment).toLocaleString('ru-RU') + ' ₽';
                rows[1].cells[2].textContent = Math.round(lastDiffPayment).toLocaleString('ru-RU') + ' ₽';
                rows[1].cells[3].textContent = (Math.round(annuityPayment - lastDiffPayment) > 0 ? '+' : '') + 
                                             Math.round(annuityPayment - lastDiffPayment).toLocaleString('ru-RU') + ' ₽';
                
                // Общая сумма выплат
                rows[2].cells[1].textContent = Math.round(annuityTotal).toLocaleString('ru-RU') + ' ₽';
                rows[2].cells[2].textContent = Math.round(diffTotal).toLocaleString('ru-RU') + ' ₽';
                rows[2].cells[3].textContent = (Math.round(annuityTotal - diffTotal) > 0 ? '+' : '') + 
                                             Math.round(annuityTotal - diffTotal).toLocaleString('ru-RU') + ' ₽';
                
                // Переплата
                rows[3].cells[1].textContent = Math.round(annuityOverpayment).toLocaleString('ru-RU') + ' ₽';
                rows[3].cells[2].textContent = Math.round(diffOverpayment).toLocaleString('ru-RU') + ' ₽';
                rows[3].cells[3].textContent = (Math.round(annuityOverpayment - diffOverpayment) > 0 ? '+' : '') + 
                                             Math.round(annuityOverpayment - diffOverpayment).toLocaleString('ru-RU') + ' ₽';
            }
        }
        
        // Функция для отрисовки графика платежей
        function drawPaymentChart(amount, term, rate) {
            const chart = document.getElementById('payment-chart');
            if (!chart) return;
            
            // Очищаем график
            chart.innerHTML = '';
            
            // Создаем SVG элемент
            const svgNS = "http://www.w3.org/2000/svg";
            const svg = document.createElementNS(svgNS, "svg");
            svg.setAttribute("width", "100%");
            svg.setAttribute("height", "100%");
            svg.setAttribute("viewBox", "0 0 600 300");
            chart.appendChild(svg);
            
            // Массивы для хранения данных о платежах
            const annuityPayments = [];
            const diffPayments = [];
            
            // Расчет платежей
            const principalPayment = amount / term;
            const annuityPayment = amount * (rate * Math.pow(1 + rate, term)) / (Math.pow(1 + rate, term) - 1);
            
            for (let i = 0; i < term; i++) {
                // Аннуитетный платеж (всегда одинаковый)
                annuityPayments.push(annuityPayment);
                
                // Дифференцированный платеж
                const remainingPrincipal = amount - (principalPayment * i);
                const interest = remainingPrincipal * rate;
                diffPayments.push(principalPayment + interest);
            }
            
            // Находим максимальное значение для масштабирования
            const maxPayment = Math.max(...diffPayments);
            
            // Рисуем оси
            const axisX = document.createElementNS(svgNS, "line");
            axisX.setAttribute("x1", "50");
            axisX.setAttribute("y1", "250");
            axisX.setAttribute("x2", "550");
            axisX.setAttribute("y2", "250");
            axisX.setAttribute("stroke", "#111827");
            axisX.setAttribute("stroke-width", "2");
            svg.appendChild(axisX);
            
            const axisY = document.createElementNS(svgNS, "line");
            axisY.setAttribute("x1", "50");
            axisY.setAttribute("y1", "50");
            axisY.setAttribute("x2", "50");
            axisY.setAttribute("y2", "250");
            axisY.setAttribute("stroke", "#111827");
            axisY.setAttribute("stroke-width", "2");
            svg.appendChild(axisY);
            
            // Рисуем линии для аннуитетных платежей
            const annuityPath = document.createElementNS(svgNS, "path");
            let annuityD = `M 50 ${250 - (annuityPayments[0] / maxPayment) * 200}`;
            const stepX = 500 / (term - 1);
            
            for (let i = 1; i < term; i++) {
                annuityD += ` L ${50 + i * stepX} ${250 - (annuityPayments[i] / maxPayment) * 200}`;
            }
            
            annuityPath.setAttribute("d", annuityD);
            annuityPath.setAttribute("stroke", "#4f46e5");
            annuityPath.setAttribute("stroke-width", "2");
            annuityPath.setAttribute("fill", "none");
            svg.appendChild(annuityPath);
            
            // Рисуем линии для дифференцированных платежей
            const diffPath = document.createElementNS(svgNS, "path");
            let diffD = `M 50 ${250 - (diffPayments[0] / maxPayment) * 200}`;
            
            for (let i = 1; i < term; i++) {
                diffD += ` L ${50 + i * stepX} ${250 - (diffPayments[i] / maxPayment) * 200}`;
            }
            
            diffPath.setAttribute("d", diffD);
            diffPath.setAttribute("stroke", "#ef4444");
            diffPath.setAttribute("stroke-width", "2");
            diffPath.setAttribute("fill", "none");
            svg.appendChild(diffPath);
            
            // Добавляем легенду
            const annuityLegend = document.createElementNS(svgNS, "text");
            annuityLegend.setAttribute("x", "60");
            annuityLegend.setAttribute("y", "30");
            annuityLegend.setAttribute("fill", "#4f46e5");
            annuityLegend.setAttribute("font-size", "12");
            annuityLegend.textContent = "Аннуитетный платеж";
            svg.appendChild(annuityLegend);
            
            const diffLegend = document.createElementNS(svgNS, "text");
            diffLegend.setAttribute("x", "200");
            diffLegend.setAttribute("y", "30");
            diffLegend.setAttribute("fill", "#ef4444");
            diffLegend.setAttribute("font-size", "12");
            diffLegend.textContent = "Дифференцированный платеж";
            svg.appendChild(diffLegend);
            
            // Добавляем подписи к осям
            const xLabel = document.createElementNS(svgNS, "text");
            xLabel.setAttribute("x", "300");
            xLabel.setAttribute("y", "280");
            xLabel.setAttribute("text-anchor", "middle");
            xLabel.setAttribute("fill", "#111827");
            xLabel.setAttribute("font-size", "12");
            xLabel.textContent = "Месяцы";
            svg.appendChild(xLabel);
            
            const yLabel = document.createElementNS(svgNS, "text");
            yLabel.setAttribute("x", "-150");
            yLabel.setAttribute("y", "20");
            yLabel.setAttribute("text-anchor", "middle");
            yLabel.setAttribute("fill", "#111827");
            yLabel.setAttribute("font-size", "12");
            yLabel.setAttribute("transform", "rotate(-90)");
            yLabel.textContent = "Размер платежа (₽)";
            svg.appendChild(yLabel);
            
            // Добавляем значения на оси Y
            const yMax = document.createElementNS(svgNS, "text");
            yMax.setAttribute("x", "45");
            yMax.setAttribute("y", "60");
            yMax.setAttribute("text-anchor", "end");
            yMax.setAttribute("fill", "#111827");
            yMax.setAttribute("font-size", "10");
            yMax.textContent = Math.round(maxPayment).toLocaleString('ru-RU');
            svg.appendChild(yMax);
            
            const yMid = document.createElementNS(svgNS, "text");
            yMid.setAttribute("x", "45");
            yMid.setAttribute("y", "150");
            yMid.setAttribute("text-anchor", "end");
            yMid.setAttribute("fill", "#111827");
            yMid.setAttribute("font-size", "10");
            yMid.textContent = Math.round(maxPayment / 2).toLocaleString('ru-RU');
            svg.appendChild(yMid);
            
            const yMin = document.createElementNS(svgNS, "text");
            yMin.setAttribute("x", "45");
            yMin.setAttribute("y", "250");
            yMin.setAttribute("text-anchor", "end");
            yMin.setAttribute("fill", "#111827");
            yMin.setAttribute("font-size", "10");
            yMin.textContent = "0";
            svg.appendChild(yMin);
            
            // Добавляем значения на оси X
            const xMin = document.createElementNS(svgNS, "text");
            xMin.setAttribute("x", "50");
            xMin.setAttribute("y", "265");
            xMin.setAttribute("text-anchor", "middle");
            xMin.setAttribute("fill", "#111827");
            xMin.setAttribute("font-size", "10");
            xMin.textContent = "1";
            svg.appendChild(xMin);
            
            const xMid = document.createElementNS(svgNS, "text");
            xMid.setAttribute("x", "300");
            xMid.setAttribute("y", "265");
            xMid.setAttribute("text-anchor", "middle");
            xMid.setAttribute("fill", "#111827");
            xMid.setAttribute("font-size", "10");
            xMid.textContent = Math.round(term / 2);
            svg.appendChild(xMid);
            
            const xMax = document.createElementNS(svgNS, "text");
            xMax.setAttribute("x", "550");
            xMax.setAttribute("y", "265");
            xMax.setAttribute("text-anchor", "middle");
            xMax.setAttribute("fill", "#111827");
            xMax.setAttribute("font-size", "10");
            xMax.textContent = term;
            svg.appendChild(xMax);
        }
        
        // Helper function for correct word form in Russian
        function getYearWord(number) {
            const lastDigit = number % 10;
            const lastTwoDigits = number % 100;
            
            if (lastTwoDigits >= 11 && lastTwoDigits <= 19) {
                return 'лет';
            }
            
            if (lastDigit === 1) {
                return 'год';
            }
            
            if (lastDigit >= 2 && lastDigit <= 4) {
                return 'года';
            }
            
            return 'лет';
        }

        // Navigation highlight on scroll
        window.addEventListener('scroll', function() {
            const sections = document.querySelectorAll('section.section-card');
            let current = '';
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 150;
                const sectionHeight = section.offsetHeight;
                if (pageYOffset >= sectionTop && pageYOffset < sectionTop + sectionHeight) {
                    current = section.getAttribute('id');
                }
            });
            
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Improve responsiveness
            enhanceResponsiveness();
            
            // Calculate initial loan
            calculateBtn.click();
            
            // Open first accordion item by default
            if (document.querySelector('.accordion-header')) {
                document.querySelector('.accordion-header').click();
            }
        });
    </script>
</body>
</html>